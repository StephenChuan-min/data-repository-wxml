(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[20],{149:function(e,t,a){},160:function(e,t,a){e.exports=a.p+"assets/img/search-empty.png"},281:function(e,t,a){"use strict";a(149)},290:function(e,t,a){"use strict";a.r(t);var c=a(4),i=a(8),s=a(0),n=a(56),r=a.n(n),o=a(160),l=a.n(o),b={class:"index-wrapper"},u={key:0,class:"toast"},O={key:1,class:"index-wrapper-modal"},j={class:"modal-content"},d=Object(i["h"])("view",{class:"body"},"\u786e\u8ba4\u5220\u9664\u5168\u90e8\u5386\u53f2\u8bb0\u5f55\uff1f",-1),p={class:"footer"},h={class:"picker-content"},f=["onClick"],v={class:"fixed"},g={class:"navigationBar"},k=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-fanhui"},null,-1),m=[k],w=Object(i["k"])("\u6e90\u8bda\u6570\u636e\u8d44\u4ea7\u5e73\u53f0"),y={class:"block search-block"},x={class:"search-input"},L=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-sousuo"},null,-1),T=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-shanchu"},null,-1),D=[T],C={key:3,class:"loading"},E=Object(i["h"])("image",{src:r.a},null,-1),P=[E],V={key:4,class:"search-record"},I={key:0},B={class:"record-head"},S=Object(i["h"])("view",{class:"title"},"\u641c\u7d22\u8bb0\u5f55",-1),z=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-lajixiang"},null,-1),R=[z],M={class:"record-content"},J=["onClick"],q={class:"username-list"},H=["onClick"],G={key:0,class:"index-wrapper-content"},U={key:0,class:"empty"},_=Object(i["h"])("image",{src:l.a},null,-1),A=Object(i["h"])("view",null,"\u641c\u7d22\u65e0\u5185\u5bb9",-1),F=[_,A],K={class:"block"},N={class:"info"},Q={class:"id"},W={class:"username"},X={class:"operate-block"},Y=["onClick"],Z=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-zichanpaimai"}),Object(i["k"])("\u8d44\u4ea7\u62cd\u5356\u6570\u636e")],-1),$={class:"select"},ee=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-jiantouxia"},null,-1),te={key:1,class:"operate-card"},ae=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-pochanzhongzu"}),Object(i["k"])("\u7834\u4ea7\u91cd\u7ec4\u6570\u636e")],-1),ce=Object(i["h"])("view",{class:"select"},"-",-1),ie=[ae,ce],se=["onClick"],ne=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-paimaizhaiquanshuju"}),Object(i["k"])("\u62cd\u5356\u503a\u6743\u6570\u636e")],-1),re={class:"select"},oe=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-jiantouxia"},null,-1),le={key:3,class:"operate-card"},be=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-zhaoshangzhaiquanshuju"}),Object(i["k"])("\u62db\u5546\u503a\u6743\u6570\u636e")],-1),ue=Object(i["h"])("view",{class:"select"},"-",-1),Oe=[be,ue],je={key:1,class:"lower-loading"},de=Object(i["k"])("\u6211\u662f\u6709\u5e95\u7ebf\u7684");function pe(e,t,a,c,n,r){var o=Object(i["y"])("native-input"),l=Object(i["y"])("nut-divider");return Object(i["v"])(),Object(i["g"])("view",b,[c.state.toast.show?(Object(i["v"])(),Object(i["g"])("view",u,Object(s["L"])(c.state.toast.title),1)):Object(i["f"])("",!0),c.state.modalVisible?(Object(i["v"])(),Object(i["g"])("view",O,[Object(i["h"])("view",j,[d,Object(i["h"])("view",p,[Object(i["h"])("view",{class:"cancel",onClick:t[0]||(t[0]=function(e){return c.state.modalVisible=!1})},"\u53d6\u6d88"),Object(i["h"])("view",{class:"confirm",onClick:t[1]||(t[1]=function(){return c.delRecords&&c.delRecords.apply(c,arguments)})},"\u786e\u5b9a")])])])):Object(i["f"])("",!0),c.state.pickerVisible?(Object(i["v"])(),Object(i["g"])("view",{key:2,class:"index-wrapper-picker","data-id":"index-wrapper-picker",onClick:t[2]||(t[2]=function(){return c.close&&c.close.apply(c,arguments)})},[Object(i["h"])("view",h,[(Object(i["v"])(!0),Object(i["g"])(i["b"],null,Object(i["w"])(c.state.pickerOptions,(function(e){return Object(i["v"])(),Object(i["g"])("view",{key:e.key,class:Object(s["I"])(["picker-option",3===c.state.pickerOptions.length?e.key===c.state.userEditParams.userEdit.auctionDataType?"pickered":"":e.key===c.state.userEditParams.userEdit.creditorDataType?"pickered":""]),onClick:function(t){return c.handlePicker(e.key)}},Object(s["L"])(e.label),11,f)})),128))])])):Object(i["f"])("",!0),Object(i["h"])("view",v,[Object(i["h"])("view",g,[Object(i["h"])("view",{class:"navigationBar-title",style:Object(s["J"])(c.state.style)},[Object(i["h"])("view",{onClick:t[3]||(t[3]=function(){return c.goBack&&c.goBack.apply(c,arguments)})},m),w],4)]),Object(i["h"])("view",y,[Object(i["h"])("view",x,[L,Object(i["l"])(o,{ref:"searchInput",onChange:c.handleChange,onConfirm:t[4]||(t[4]=function(e){var t=e.detail;return c.doSearch(t)}),value:c.state.params.username,"auto-focus":!c.state.flag&&!c.state.modalVisible},null,8,["onChange","value","auto-focus"]),Object(i["h"])("view",{class:Object(s["I"])(["suffix",c.state.flag?"suffix-cancel":"suffix-search"]),onClick:t[5]||(t[5]=function(){return c.doSearch()})},Object(s["L"])(c.state.flag?"\u53d6\u6d88":"\u641c\u7d22"),3),c.state.params.username?(Object(i["v"])(),Object(i["g"])("view",{key:0,onClick:t[6]||(t[6]=function(){return c.clear&&c.clear.apply(c,arguments)}),class:"suffix suffix-iconfont"},D)):Object(i["f"])("",!0)])])]),c.state.loading?(Object(i["v"])(),Object(i["g"])("view",C,P)):Object(i["f"])("",!0),c.state.loading||c.state.flag?Object(i["f"])("",!0):(Object(i["v"])(),Object(i["g"])("view",V,[0!==c.state.records.length&&0===c.state.usernameList.length?(Object(i["v"])(),Object(i["g"])("view",I,[Object(i["h"])("view",B,[S,Object(i["h"])("view",{onClick:t[7]||(t[7]=function(e){return c.state.modalVisible=!0})},R)]),Object(i["h"])("view",M,[(Object(i["v"])(!0),Object(i["g"])(i["b"],null,Object(i["w"])(c.state.records,(function(e){return Object(i["v"])(),Object(i["g"])("view",{class:"record-content-item",onClick:function(t){return c.doSearch(e)}},Object(s["L"])(e),9,J)})),256))])])):Object(i["f"])("",!0),Object(i["h"])("view",q,[(Object(i["v"])(!0),Object(i["g"])(i["b"],null,Object(i["w"])(c.state.usernameList,(function(e){return Object(i["v"])(),Object(i["g"])("view",{class:"username-list-item",onClick:function(t){return c.doSearch(e)}},Object(s["L"])(e),9,H)})),256))])])),Object(i["h"])("scroll-view",{style:{height:"calc(100vh - 138px)"},"scroll-y":!0,onScrolltolower:t[8]||(t[8]=function(){return c.scrollToLower&&c.scrollToLower.apply(c,arguments)})},[!c.state.loading&&c.state.flag?(Object(i["v"])(),Object(i["g"])("view",G,[0===c.state.userList.length?(Object(i["v"])(),Object(i["g"])("view",U,F)):Object(i["f"])("",!0),(Object(i["v"])(!0),Object(i["g"])(i["b"],null,Object(i["w"])(c.state.userList,(function(e){return Object(i["v"])(),Object(i["g"])("view",{class:"user-list-container",key:e.id},[Object(i["h"])("view",K,[Object(i["h"])("view",{class:Object(s["I"])(["name","\u6b63\u5f0f"===e.role?"formal":"try"])},Object(s["L"])(e.name||"-"),3),Object(i["h"])("view",N,[Object(i["h"])("view",Q,"ID\uff1a"+Object(s["L"])(e.id||"-"),1),Object(i["h"])("view",W,"\u8d26\u53f7\uff1a"+Object(s["L"])(e.username||"-"),1)]),Object(i["h"])("view",X,[-1!==e.auctionDataType?(Object(i["v"])(),Object(i["g"])("view",{key:0,class:"operate-card",onClick:function(t){return c.openMask("auctionDataType",e)}},[Z,Object(i["h"])("view",$,[Object(i["k"])(Object(s["L"])(c.state.auctionDataType[e.auctionDataType]),1),ee])],8,Y)):Object(i["f"])("",!0),e.structuredObject.match(new RegExp("\u7834\u4ea7\u91cd\u7ec4\u6570\u636e","g"))?(Object(i["v"])(),Object(i["g"])("view",te,ie)):Object(i["f"])("",!0),-1!==e.creditorDataType?(Object(i["v"])(),Object(i["g"])("view",{key:2,class:"operate-card",onClick:function(t){return c.openMask("creditorDataType",e)}},[ne,Object(i["h"])("view",re,[Object(i["k"])(Object(s["L"])(c.state.creditorDataType[e.creditorDataType]),1),oe])],8,se)):Object(i["f"])("",!0),e.structuredObject.match(new RegExp("\u62db\u5546\u503a\u6743\u6570\u636e","g"))?(Object(i["v"])(),Object(i["g"])("view",le,Oe)):Object(i["f"])("",!0)])])])})),128)),c.state.toLowerLoading?(Object(i["v"])(),Object(i["g"])("view",je,"\u52a0\u8f7d\u4e2d...")):Object(i["f"])("",!0),c.state.dividerVisible?(Object(i["v"])(),Object(i["e"])(l,{key:2},{default:Object(i["G"])((function(){return[de]})),_:1})):Object(i["f"])("",!0)])):Object(i["f"])("",!0)],32)])}var he=a(16),fe=a(46),ve=a(2),ge=a(10),ke=a.n(ge),me=a(12),we=a(31),ye=a(48),xe={name:"Search",setup:function(){var e=Object(ve["k"])({auctionDataType:ye["a"],creditorDataType:ye["b"],loading:!1,pickerVisible:!1,modalVisible:!1,dividerVisible:!1,records:[],toast:{show:!1,title:""},style:{marginTop:"",lineHeight:""},params:{username:"",isEnabledUser:!0,page:1},structuredObject:[{label:"\u5168\u90e8",key:""},{label:"\u8d44\u4ea7\u62cd\u5356\u6570\u636e",key:8},{label:"\u7834\u4ea7\u91cd\u7ec4\u6570\u636e",key:11},{label:"\u62cd\u5356\u503a\u6743\u6570\u636e",key:26},{label:"\u62db\u5546\u503a\u6743\u6570\u636e",key:29}],userList:[],usernameList:[],userEditParams:{id:"",userEdit:{auctionDataType:0,creditorDataType:0,functionId:[8,11,26,29],name:"",roleId:""}},pickerOptions:[{label:"\u666e\u901a\u6570\u636e",key:0},{label:"\u76f8\u4f3c\u6570\u636e",key:2},{label:"\u975e\u521d\u6807\u6570\u636e",key:3}],flag:!1,toLowerLoading:!1}),t=function(t){e.toast.show=!0,e.toast.title=t;var a=setTimeout((function(){e.toast.show=!1,clearTimeout(a)}),1500)},a=function(){e.loading=!0,e.flag=!0,Object(we["b"])(e.params).then((function(t){var a=t.data;200===a.code&&(e.userList=a.data||[])})).finally((function(){e.loading=!1}))},c=function(){ke.a.navigateBack({delta:1})},s=function(t){e.params.username="",e.usernameList=[],e.flag=!1},n=Object(me["b"])((function(t){e.params.username=t.detail;var a=e.params.username.replace(/\s/g,"");a?(e.flag=!1,Object(we["b"])(Object(fe["a"])({username:a},e.params)).then((function(t){var a=t.data;200===a.code&&(e.usernameList=[],(a.data||[]).forEach((function(t){e.usernameList.push(t.name)})))}))):e.usernameList=[]}),300),r=function(){me["c"].removeItem("records"),e.records=[],e.modalVisible=!1},o=function(i){if(e.flag)c();else{i&&(e.params.username=i);var s=e.params.username=e.params.username.replace(/\s/g,"");if(!s)return t("\u8bf7\u8f93\u5165\u7528\u6237\u540d\u6216\u8d26\u53f7");e.records.unshift(e.params.username);var n=e.records=Object(he["a"])(new Set(e.records)).splice(0,10);me["c"].setItem("records",n),a()}},l=function(t,a){switch(e.userEditParams.id=a.id,e.userEditParams.userEdit.name=a.name,e.userEditParams.userEdit.roleId="\u6b63\u5f0f"===a.role?1:0,e.userEditParams.userEdit.creditorDataType=-1===a.creditorDataType?"":a.creditorDataType,e.userEditParams.userEdit.auctionDataType=[0,1].includes(a.auctionDataType)?0:-1===a.auctionDataType?"":a.auctionDataType,e.pickerVisible=!0,t){case"auctionDataType":e.pickerOptions=[{label:"\u666e\u901a\u6570\u636e",key:0},{label:"\u76f8\u4f3c\u6570\u636e",key:2},{label:"\u975e\u521d\u6807\u6570\u636e",key:3}];break;case"creditorDataType":e.pickerOptions=[{label:"\u666e\u901a\u6570\u636e",key:0},{label:"\u975e\u521d\u6807\u6570\u636e",key:1}];break;default:break}},b=function(t){var c=e.userEditParams,i=c.id,s=c.userEdit;3===e.pickerOptions.length?e.userEditParams.userEdit.auctionDataType=t:e.userEditParams.userEdit.creditorDataType=t,e.pickerVisible=!1,Object(we["a"])(i,Object(me["a"])(s)).then((function(e){a()}))},u=function(){e.dividerVisible||(e.toLowerLoading=!0,e.params.page++,Object(we["b"])(Object(me["a"])(e.params)).then((function(t){var a=t.data;200===a.code&&(0===(a.data||[]).length?e.dividerVisible=!0:e.userList=[].concat(Object(he["a"])(e.userList),Object(he["a"])(a.data||[])))})).finally((function(){e.toLowerLoading=!1})))},O=function(t){var a=t.target.dataset.id;switch(a){case"index-wrapper-dialog":e.visible=!1;break;case"index-wrapper-picker":e.pickerVisible=!1;break;default:break}};return Object(i["s"])((function(){var t=ke.a.getMenuButtonBoundingClientRect(),a=t.height,c=t.top;e.style.marginTop=c+"px",e.style.lineHeight=a+"px",e.records=me["c"].getItem("records")||[]})),{state:e,doSearch:o,openMask:l,close:O,handleChange:n,delRecords:r,clear:s,handlePicker:b,goBack:c,scrollToLower:u}}},Le=(a(281),a(29)),Te=a.n(Le);const De=Te()(xe,[["render",pe]]);var Ce=De,Ee={usingComponents:{"native-input":"../components/input/input"}};Page(Object(c["createPageConfig"])(Ce,"pages/search/index",{root:{cn:[]}},Ee||{}))}},[[290,0,1,2,3]]]);