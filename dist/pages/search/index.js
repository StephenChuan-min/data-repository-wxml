(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[18],{149:function(e,t,c){},158:function(e,t,c){e.exports=c.p+"assets/img/search-empty.png"},278:function(e,t,c){"use strict";c(149)},287:function(e,t,c){"use strict";c.r(t);var a=c(4),i=c(8),n=c(0),s=c(12),r=c(55),o=c.n(r),l=c(158),u=c.n(l),b={class:"index-wrapper"},O={key:0,class:"index-wrapper-modal"},j={class:"modal-content"},d=Object(i["h"])("view",{class:"body"},"\u786e\u8ba4\u5220\u9664\u5168\u90e8\u5386\u53f2\u8bb0\u5f55\uff1f",-1),p={class:"footer"},h={class:"picker-content"},f=["onClick"],k={class:"fixed"},g={class:"navigationBar"},w=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-fanhui"},null,-1),m=[w],y=Object(i["k"])("\u6e90\u8bda\u6570\u636e\u8d44\u4ea7\u5e73\u53f0"),v={class:"block search-block"},x={class:"search-input"},T=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-sousuo"},null,-1),D=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-shanchu"},null,-1),E=[D],C={key:2,class:"loading"},L=Object(i["h"])("image",{src:o.a},null,-1),P=[L],V={key:3,class:"search-record"},I={key:0},B={class:"record-head"},z=Object(i["h"])("view",{class:"title"},"\u641c\u7d22\u8bb0\u5f55",-1),S=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-lajixiang"},null,-1),R=[S],J={class:"record-content"},M=["onClick"],q={class:"username-list"},H=["onClick"],U={key:4,class:"index-wrapper-content"},A={key:0,class:"empty"},F=Object(i["h"])("image",{src:u.a},null,-1),G=Object(i["h"])("view",{style:{color:"rgba(0, 0, 0, 0.87)","font-size":"14px"}},"\u641c\u7d22\u65e0\u5185\u5bb9",-1),K=[F,G],N={class:"block"},Q={class:"info"},W={class:"id"},X={class:"username"},Y={class:"operate-block"},Z=["onClick"],$=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-zichanpaimai"}),Object(i["k"])("\u8d44\u4ea7\u62cd\u5356\u6570\u636e")],-1),_={class:"select"},ee=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-jiantouxia"},null,-1),te={key:1,class:"operate-card"},ce=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-pochanzhongzu"}),Object(i["k"])("\u7834\u4ea7\u91cd\u7ec4\u6570\u636e")],-1),ae=Object(i["h"])("view",{class:"select"},"-",-1),ie=[ce,ae],ne=["onClick"],se=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-paimaizhaiquanshuju"}),Object(i["k"])("\u62cd\u5356\u503a\u6743\u6570\u636e")],-1),re={class:"select"},oe=Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-jiantouxia"},null,-1),le={key:3,class:"operate-card"},ue=Object(i["h"])("view",{class:"title"},[Object(i["h"])("text",{class:"iconfont icon-xiaochengxu-zhaoshangzhaiquanshuju"}),Object(i["k"])("\u62db\u5546\u503a\u6743\u6570\u636e")],-1),be=Object(i["h"])("view",{class:"select"},"-",-1),Oe=[ue,be];function je(e,t,c,a,r,o){return Object(i["w"])(),Object(i["g"])("view",b,[a.state.modalVisible?(Object(i["w"])(),Object(i["g"])("view",O,[Object(i["h"])("view",j,[d,Object(i["h"])("view",p,[Object(i["h"])("view",{class:"cancel",onClick:t[0]||(t[0]=function(e){return a.state.modalVisible=!1})},"\u53d6\u6d88"),Object(i["h"])("view",{class:"confirm",onClick:t[1]||(t[1]=function(){return a.delRecords&&a.delRecords.apply(a,arguments)})},"\u786e\u5b9a")])])])):Object(i["f"])("",!0),a.state.pickerVisible?(Object(i["w"])(),Object(i["g"])("view",{key:1,class:"index-wrapper-picker","data-id":"index-wrapper-picker",onClick:t[2]||(t[2]=function(){return a.close&&a.close.apply(a,arguments)})},[Object(i["h"])("view",h,[(Object(i["w"])(!0),Object(i["g"])(i["b"],null,Object(i["x"])(a.state.pickerOptions,(function(e){return Object(i["w"])(),Object(i["g"])("view",{key:e.key,class:Object(n["I"])(["picker-option",3===a.state.pickerOptions.length?e.key===a.state.userEditParams.userEdit.auctionDataType?"pickered":"":e.key===a.state.userEditParams.userEdit.creditorDataType?"pickered":""]),onClick:function(t){return a.handlePicker(e.key)}},Object(n["L"])(e.label),11,f)})),128))])])):Object(i["f"])("",!0),Object(i["h"])("view",k,[Object(i["h"])("view",g,[Object(i["h"])("view",{class:"navigationBar-title",style:Object(n["J"])(a.state.style)},[Object(i["h"])("view",{onClick:t[3]||(t[3]=function(){return a.goBack&&a.goBack.apply(a,arguments)})},m),y],4)]),Object(i["h"])("view",v,[Object(i["h"])("view",x,[T,Object(i["J"])(Object(i["h"])("input",Object(i["r"])({placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7\u6216\u59d3\u540d"},Object(i["C"])({confirm:function(){return a.doSearch()},change:a.handleChange}),{"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.state.params.username=e}),focus:!0}),null,16),[[s["c"],a.state.params.username]]),Object(i["h"])("view",{class:Object(n["I"])(["suffix",a.state.flag?"suffix-cancel":"suffix-search"]),onClick:t[5]||(t[5]=function(){return a.doSearch()})},Object(n["L"])(a.state.flag?"\u53d6\u6d88":"\u641c\u7d22"),3),a.state.params.username?(Object(i["w"])(),Object(i["g"])("view",{key:0,onClick:t[6]||(t[6]=function(){return a.clear&&a.clear.apply(a,arguments)}),class:"suffix suffix-iconfont"},E)):Object(i["f"])("",!0)])])]),a.state.loading?(Object(i["w"])(),Object(i["g"])("view",C,P)):Object(i["f"])("",!0),a.state.loading||a.state.flag?Object(i["f"])("",!0):(Object(i["w"])(),Object(i["g"])("view",V,[0!==a.state.records.length&&0===a.state.usernameList.length?(Object(i["w"])(),Object(i["g"])("view",I,[Object(i["h"])("view",B,[z,Object(i["h"])("view",{onClick:t[7]||(t[7]=function(e){return a.state.modalVisible=!0})},R)]),Object(i["h"])("view",J,[(Object(i["w"])(!0),Object(i["g"])(i["b"],null,Object(i["x"])(a.state.records,(function(e){return Object(i["w"])(),Object(i["g"])("view",{class:"record-content-item",onClick:function(t){return a.doSearch(e)}},Object(n["L"])(e),9,M)})),256))])])):Object(i["f"])("",!0),Object(i["h"])("view",q,[(Object(i["w"])(!0),Object(i["g"])(i["b"],null,Object(i["x"])(a.state.usernameList,(function(e){return Object(i["w"])(),Object(i["g"])("view",{class:"username-list-item",onClick:function(t){return a.doSearch(e)}},Object(n["L"])(e),9,H)})),256))])])),!a.state.loading&&a.state.flag?(Object(i["w"])(),Object(i["g"])("view",U,[0===a.state.userList.length?(Object(i["w"])(),Object(i["g"])("view",A,K)):Object(i["f"])("",!0),(Object(i["w"])(!0),Object(i["g"])(i["b"],null,Object(i["x"])(a.state.userList,(function(e){return Object(i["w"])(),Object(i["g"])("view",{class:"user-list-container",key:e.id},[Object(i["h"])("view",N,[Object(i["h"])("view",{class:Object(n["I"])(["name","\u6b63\u5f0f"===e.role?"formal":"try"])},Object(n["L"])(e.name||"-"),3),Object(i["h"])("view",Q,[Object(i["h"])("view",W,"ID\uff1a"+Object(n["L"])(e.id||"-"),1),Object(i["h"])("view",X,"\u8d26\u53f7\uff1a"+Object(n["L"])(e.username||"-"),1)]),Object(i["h"])("view",Y,[-1!==e.auctionDataType?(Object(i["w"])(),Object(i["g"])("view",{key:0,class:"operate-card",onClick:function(t){return a.openMask("auctionDataType",e)}},[$,Object(i["h"])("view",_,[Object(i["k"])(Object(n["L"])(a.state.auctionDataType[e.auctionDataType]),1),ee])],8,Z)):Object(i["f"])("",!0),e.structuredObject.match(new RegExp("\u7834\u4ea7\u91cd\u7ec4\u6570\u636e","g"))?(Object(i["w"])(),Object(i["g"])("view",te,ie)):Object(i["f"])("",!0),-1!==e.creditorDataType?(Object(i["w"])(),Object(i["g"])("view",{key:2,class:"operate-card",onClick:function(t){return a.openMask("creditorDataType",e)}},[se,Object(i["h"])("view",re,[Object(i["k"])(Object(n["L"])(a.state.creditorDataType[e.creditorDataType]),1),oe])],8,ne)):Object(i["f"])("",!0),e.structuredObject.match(new RegExp("\u62db\u5546\u503a\u6743\u6570\u636e","g"))?(Object(i["w"])(),Object(i["g"])("view",le,Oe)):Object(i["f"])("",!0)])])])})),128))])):Object(i["f"])("",!0)])}var de=c(22),pe=c(2),he=c(10),fe=c.n(he),ke=c(11),ge=c(35),we=c(47),me={name:"Search",setup:function(){var e=Object(pe["k"])({auctionDataType:we["a"],creditorDataType:we["b"],loading:!1,pickerVisible:!1,modalVisible:!1,records:[],style:{marginTop:"",lineHeight:""},params:{username:""},structuredObject:[{label:"\u5168\u90e8",key:""},{label:"\u8d44\u4ea7\u62cd\u5356\u6570\u636e",key:8},{label:"\u7834\u4ea7\u91cd\u7ec4\u6570\u636e",key:11},{label:"\u62cd\u5356\u503a\u6743\u6570\u636e",key:26},{label:"\u62db\u5546\u503a\u6743\u6570\u636e",key:29}],userList:[],usernameList:[],userEditParams:{id:"",userEdit:{auctionDataType:0,creditorDataType:0,functionId:[8,11,26,29],name:"",roleId:""}},pickerOptions:[{label:"\u666e\u901a\u6570\u636e",key:0},{label:"\u76f8\u4f3c\u6570\u636e",key:2},{label:"\u975e\u521d\u6807\u6570\u636e",key:3}],flag:!1}),t=function(){e.loading=!0,e.flag=!0,Object(ge["b"])(e.params).then((function(t){var c=t.data;200===c.code&&(e.userList=c.data||[])})).finally((function(){e.loading=!1}))},c=function(){fe.a.navigateBack({delta:1})},a=function(){e.params.username="",e.usernameList=[]},n=Object(ke["b"])((function(){var t=e.params.username.replace(/\s/g,"");t?(e.flag=!1,Object(ge["b"])({username:t}).then((function(t){var c=t.data;200===c.code&&(c.data||[]).forEach((function(t){e.usernameList.push(t.name)}))}))):e.usernameList=[]}),300),s=function(){ke["c"].removeItem("records"),e.records=[],e.modalVisible=!1},r=function(a){if(e.flag)c();else{a&&(e.params.username=a);var i=e.params.username=e.params.username.replace(/\s/g,"");if(!i)return Object(ke["d"])("\u8bf7\u8f93\u5165\u7528\u6237\u540d\u6216\u8d26\u53f7");e.records.unshift(e.params.username);var n=e.records=Object(de["a"])(new Set(e.records)).splice(0,10);ke["c"].setItem("records",n),t()}},o=function(t,c){switch(e.userEditParams.id=c.id,e.userEditParams.userEdit.name=c.name,e.userEditParams.userEdit.roleId="\u6b63\u5f0f"===c.role?1:0,e.userEditParams.userEdit.creditorDataType=-1===c.creditorDataType?"":c.creditorDataType,e.userEditParams.userEdit.auctionDataType=[0,1].includes(c.auctionDataType)?0:-1===c.auctionDataType?"":c.auctionDataType,e.pickerVisible=!0,t){case"auctionDataType":e.pickerOptions=[{label:"\u666e\u901a\u6570\u636e",key:0},{label:"\u76f8\u4f3c\u6570\u636e",key:2},{label:"\u975e\u521d\u6807\u6570\u636e",key:3}];break;case"creditorDataType":e.pickerOptions=[{label:"\u666e\u901a\u6570\u636e",key:0},{label:"\u975e\u521d\u6807\u6570\u636e",key:1}];break;default:break}},l=function(c){var a=e.userEditParams,i=a.id,n=a.userEdit;3===e.pickerOptions.length?e.userEditParams.userEdit.auctionDataType=c:e.userEditParams.userEdit.creditorDataType=c,e.pickerVisible=!1,Object(ge["a"])(i,Object(ke["a"])(n)).then((function(e){t()}))},u=function(t){var c=t.target.dataset.id;switch(c){case"index-wrapper-dialog":e.visible=!1;break;case"index-wrapper-picker":e.pickerVisible=!1;break;default:break}};return Object(i["t"])((function(){var t=fe.a.getMenuButtonBoundingClientRect(),c=t.height,a=t.top;e.style.marginTop=a+"px",e.style.lineHeight=c+"px",e.records=ke["c"].getItem("records")||[]})),{state:e,doSearch:r,openMask:o,close:u,handleChange:n,delRecords:s,clear:a,handlePicker:l,goBack:c}}},ye=(c(278),c(34)),ve=c.n(ye);const xe=ve()(me,[["render",je]]);var Te=xe,De={usingComponents:{"native-input":"../components/input/input"}};Page(Object(a["createPageConfig"])(Te,"pages/search/index",{root:{cn:[]}},De||{}))}},[[287,0,1,2,3]]]);